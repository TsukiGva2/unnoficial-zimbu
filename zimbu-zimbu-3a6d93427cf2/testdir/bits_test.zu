#
# The Zimbu compiler written in Zimbu
#
# Tests for BITS
#
#*license
#* Copyright 2015 Bram Moolenaar  All Rights Reserved.
#*
#* Licensed under the Apache License, Version 2.0.  See the LICENSE file or
#* obtain a copy at: http://www.apache.org/licenses/LICENSE-2.0
#

FUNC test_object() status
  # No assert, just check that this compiles.
  LOG.Level level = LOG.Level.info
  string msg = "error"
  Z.Pos zpos = NEW("file", 123, 80)
  bool isInternal = TRUE
  LOG.log(level, msg, zpos, isInternal ? LOG.Flags.internal : 0)

  RETURN OK
}

CLASS Foo
  BITS FooBits
    int4  :value
  }
}

FUNC getFooValue(Foo.FooBits bits) int
  RETURN bits.value
}

FUNC test_fooBits() status
  Foo.FooBits foo = Foo.FooBits.value=3
  TEST.equal(3, getFooValue(foo))

  RETURN OK
}
